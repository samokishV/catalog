input{
 jdbc {
   jdbc_driver_library => "/home/victoriia/Downloads/mysql-connector-java_8.0.17-1ubuntu18.04_all/data/usr/share/java/mysql-connector-java-8.0.17.jar"
   jdbc_driver_class => "com.mysql.jdbc.Driver"
   jdbc_connection_string => "jdbc:mysql://localhost:3306/catalog?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC"
   jdbc_user => "samokish"
   jdbc_password => "qwerty"
   schedule => "* * * * *"
   statement => "SELECT * from brands"
   type => "brands"
 }

 jdbc {
   jdbc_driver_library => "/home/victoriia/Downloads/mysql-connector-java_8.0.17-1ubuntu18.04_all/data/usr/share/java/mysql-connector-java-8.0.17.jar"
   jdbc_driver_class => "com.mysql.jdbc.Driver"
   jdbc_connection_string => "jdbc:mysql://localhost:3306/catalog?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC"
   jdbc_user => "samokish"
   jdbc_password => "qwerty"
   schedule => "* * * * *"
   statement => "SELECT * from sizes"
   type => "sizes"
  }

 jdbc {
   jdbc_driver_library => "/home/victoriia/Downloads/mysql-connector-java_8.0.17-1ubuntu18.04_all/data/usr/share/java/mysql-connector-java-8.0.17.jar"
   jdbc_driver_class => "com.mysql.jdbc.Driver"
   jdbc_connection_string => "jdbc:mysql://localhost:3306/catalog?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC"
   jdbc_user => "samokish"
   jdbc_password => "qwerty"
   schedule => "* * * * *"
   statement => "SELECT * from types"
   type => "types"
  }

 jdbc {
   jdbc_driver_library => "/home/victoriia/Downloads/mysql-connector-java_8.0.17-1ubuntu18.04_all/data/usr/share/java/mysql-connector-java-8.0.17.jar"
   jdbc_driver_class => "com.mysql.jdbc.Driver"
   jdbc_connection_string => "jdbc:mysql://localhost:3306/catalog?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC"
   jdbc_user => "samokish"
   jdbc_password => "qwerty"
   schedule => "* * * * *"
   statement => "SELECT * from clothes"
   type => "clothes"
  }

 jdbc {
   jdbc_driver_library => "/home/victoriia/Downloads/mysql-connector-java_8.0.17-1ubuntu18.04_all/data/usr/share/java/mysql-connector-java-8.0.17.jar"
   jdbc_driver_class => "com.mysql.jdbc.Driver"
   jdbc_connection_string => "jdbc:mysql://localhost:3306/catalog?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC"
   jdbc_user => "samokish"
   jdbc_password => "qwerty"
   schedule => "* * * * *"
   statement => "SELECT * from typeSizes"
   type => "type_sizes"
  }

  jdbc {
   jdbc_driver_library => "/home/victoriia/Downloads/mysql-connector-java_8.0.17-1ubuntu18.04_all/data/usr/share/java/mysql-connector-java-8.0.17.jar"
   jdbc_driver_class => "com.mysql.jdbc.Driver"
   jdbc_connection_string => "jdbc:mysql://localhost:3306/catalog?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC"
   jdbc_user => "samokish"
   jdbc_password => "qwerty"
   schedule => "* * * * *"
   statement => "select c.id as id, c.name as name, b.name as brand, t.name as cloth_type, s.value from clothes as c join brands as b on c.brandId=b.id join types as t on c.typeId=t.id join clothSizes as cs on cs.clothId=c.id join sizes as s on cs.sizeId=s.id order by c.id, value"
   type => "clothes_denormal"
  }

 jdbc {
   jdbc_driver_library => "/home/victoriia/Downloads/mysql-connector-java_8.0.17-1ubuntu18.04_all/data/usr/share/java/mysql-connector-java-8.0.17.jar"
   jdbc_driver_class => "com.mysql.jdbc.Driver"
   jdbc_connection_string => "jdbc:mysql://localhost:3306/catalog?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC"
   jdbc_user => "samokish"
   jdbc_password => "qwerty"
   schedule => "* * * * *"
   statement => "select ts.id, name, value from types as t join typeSizes as ts on ts.typeId  = t.id join sizes as s on ts.sizeId  = s.id"
   type => "type_sizes_denormal"
  }

 jdbc {
   jdbc_driver_library => "/home/victoriia/Downloads/mysql-connector-java_8.0.17-1ubuntu18.04_all/data/usr/share/java/mysql-connector-java-8.0.17.jar"
   jdbc_driver_class => "com.mysql.jdbc.Driver"
   jdbc_connection_string => "jdbc:mysql://localhost:3306/catalog?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC"
   jdbc_user => "samokish"
   jdbc_password => "qwerty"
   schedule => "* * * * *"
   statement => "SELECT * from clothSizes"
   type => "cloth_sizes"
  }
}

output {
 if [type] == "brands" {
  elasticsearch{
    index => "catalog_brands"
    hosts => "localhost:9200"
    document_id => "%{id}"
  }
 }

 if [type] == "sizes" {
  elasticsearch{
    index => "catalog_sizes"
    hosts => "localhost:9200"
    document_id => "%{id}"
  }
 }

 if [type] == "types" {
  elasticsearch{
    index => "catalog_types"
    hosts => "localhost:9200"
    document_id => "%{id}"
  }
 }

 if [type] == "clothes" {
  elasticsearch{
    index => "catalog_clothes"
    hosts => "localhost:9200"
    document_id => "%{id}"
  }
 }

 if [type] == "clothes_denormal" {
  elasticsearch{
    index => "catalog_clothes_denormal"
    hosts => "localhost:9200"
    document_id => "%{id}_%{value}"
  }
 }

 if [type] == "type_sizes" {
  elasticsearch{
    index => "catalog_type_sizes"
    hosts => "localhost:9200"
    document_id => "%{id}"
  }
 }

 if [type] == "type_sizes_denormal" {
  elasticsearch{
    index => "catalog_type_sizes_denormal"
    hosts => "localhost:9200"
    document_id => "%{id}"
  }
 }

 if [type] == "cloth_sizes" {
  elasticsearch{
    index => "catalog_cloth_sizes"
    hosts => "localhost:9200"
    document_id => "%{id}"
  }
 }
}

